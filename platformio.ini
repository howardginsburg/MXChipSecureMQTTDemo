; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html
;
; Build a specific profile:
;   pio run -e mqtt_userpass
;   pio run -e mqtt_userpass_tls
;   pio run -e mqtt_mtls

; ===== Shared settings for all environments =====
[env]
platform = ststm32
board = mxchip_az3166
framework = arduino
monitor_speed = 115200
build_flags =
    -DMQTT_MAX_PACKET_SIZE=1024
platform_packages =
    framework-arduinostm32mxchip@https://github.com/howardginsburg/framework-arduinostm32mxchip.git

; ===== MQTT with username/password (no TLS) =====
[env:mqtt_userpass]
build_flags =
    ${env.build_flags}
    -DCONNECTION_PROFILE=PROFILE_MQTT_USERPASS

; ===== MQTT with username/password over TLS =====
[env:mqtt_userpass_tls]
build_flags =
    ${env.build_flags}
    -DCONNECTION_PROFILE=PROFILE_MQTT_USERPASS_TLS

; ===== MQTT with mutual TLS (client certificate) =====
[env:mqtt_mtls]
build_flags =
    ${env.build_flags}
    -DCONNECTION_PROFILE=PROFILE_MQTT_MTLS